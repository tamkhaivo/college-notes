# Computer Networking Fundamentals

Dr. Daryl Posnett

How to connect computers together?
https://book.systemsapproach.org
https://gaia.cs.umass.edu/kurose_ross/eighth.php

Java

Read Chapter 1

## Gradings

1. Pop Quizzes - 5-10%
2. Quizzes - 30-35%
3. Final Exam - 30-35%
4. Projects/HW - 30-35%

A = 100-84.45
B = 84.44-69.45
C = 69.44-54.45
D = 49.45-55
F = 50-0

## Top Down

- Bottom Approach

1. Physical Layer
   -- What are we using to connect to port --> Bandwidth --> Physical Layer
2. Data
3. Network Layer
4. Transport Layer
5. Application Layer

Internet Protocols
Set of Rules to Communicate (Introductions, Questions, Answers)
Format - Order- Message Sent/Recv

- RTC
-

Programming Interface

- Hooks - Allowing send and recieve to connect

Digital Subscriber Line

- Phone line to connect to internet

WIFI

- Half-duplex w/ broadcast
- TX stronger than RX
- Propagation enviornment via Reflection, obstruction, interface

Driven By Economics and National Policies

Curcuit Switching

- Frequency division multiplexing (FDM)
  -- Optical, Frequencies, Each call allocated its own band
- Time division multiplexing (TDM)
  -- Dividied into slots
  -- NOT Packet SWITCHING
  -- Periodic Slots, wider = more bandiwth

Packet Switching vs Circuit Switching

- 1Gb/s Link
- 100Mbs when active
- Active 10% of the time

1. Circuit Switching

- 10 Users
-

2. Packet Switching

- 35 Users (Prob greater than 10 active users is less than 0.0004)
- Negative Binomial (p = .1, x = 35, r = 10) = 0.00038
- Bursty Data
  -- Sometimes has data to send and sometimes not
  -- Resources Sharing
- Excessive Congestion
  -- Packet Delay

## Internet Structure

- Customer and ISPs have economic agreement
- Multiple ISPs due to competition and cheaper
- IXP - Internet Exchange Points to share ISPs
- Peering Link - Between ISPs
- Regional ISP - Buy link between rural (few people)
- Tier 1 ISPs
  -- AT&T
- Content Provider Network (Google, Facebook)

Packet Delay anbd Loss

- Queue in router buffers wait for transmission
- Packet Loss occues when queue packet fills up
- Loss packet may be retransmitted by previous node, by source system, or not at all
- Packet arriving to full queue

EME Delay

- Propogation Delay from the MOON to Other side of the Earth

Caravan Analogy

- Car = bit
- Caravan = packet
- Toll Booth = 12s/car
- Propogation at 100km/hr
- Transmission Time = 120s
- Propogation Time = 1hr
- All of Caravan = 62 mins

a = acerage packet arrival rate
L = packet length (bits)
R = Link bandwidth

La / R = Traffic Intensity

0 = Average Queing Delay is small
1 = Queuing Delay is Large

> 1 = More work is arriving than can be services
> <75% of bandwidth is optimal

Real Internet and Delay

- Traceroute provides a measure of delay from end to end

## Network Security

- Internet not origionally designed with much security
  -- Original vision: a group of mutually trusting users attached to a trasnsport netowkr
  -- Security considerations in all layers

### SSH vs Telnet

- Telnet is used for embedded systems (Trusting - Plaintext w/ Username and Passwords)
- SSH is more computation intensive
- Design architecture immune to attack

### Bad Guys

1. Packet Sniffing via broadcast media or promiscuous network interface reads
2. IP Spoofing (Fake Identity) - Injection of false sources address
3. DDOS - Resources bandwidth unavailable with bogus traffic

### Lines of Defences

1. Authentication - Proving you are who you say you are

- Cellular networks provides harware identity via SIM card

2. Confidentiality via Encryption
3. Integrity Checks via Digital Signatures prevent/detects tampering
4. Access Restrictions - Password protected VPNs
5. Security through Obscurity - Better than nothing
6. Firewall - Middleboxes in access and core networks
   -- detects DDOS
   -- off-by-default - restricting access

## Protocols

Regulate the communication between

1. Hosts
2. Routes
3. Links
4. Applications
5. Protocols
6. Hardware

Ticket (Purchase) --- Ticket (Complain)
Baggage (Check) --- Baggage (Claim)
Gates (Load) --- Gates Unload
Runaway Takeoff --- Runaway Landing
Airline Routing --- Airline Routing

### Why Layering

- Explicit Structure which allows identification, relationship of systms, layer reference model
- modularized change

#### Layers

1. Application (HTTP, IMAP, SMTP, DNS) - Message
2. Transport (TCP, UDP) - Segment
3. Network (IP, ARP, ICMP) - Datagram
4. Data Link (MAC, LLC, Ethernet, PPP, 802.11) - Frame
5. Physical (Bits on the line)

ISO/OSI Reference Model

1. Application
2. Presentation (Allows Applications to interpret meaning of data, encryption, compression, machine-sepecific conversion) -- Pushed into Application Layer
3. Session (Syncronization, checkpointing, recovery of data) --> down into transport layer
4. Transport
5. Network
6. Data Link
7. Physical

Cerf and Khanh - Internet Architecture

1. Minimalism, automomy, no internal changes required
2. best-effort service model
3. stateless routing
4. decentralized control

Software defined networking (SDN)
Cloud Services

Port 59 - Homework

SimplePingClient.java - 21 Lines of Code
TimedPingClient.java - 41 Lines of Code

java h.java

### IP Fragmentation

1500 bytes Ethernet
4500 bytes DFFI

ip-addresss 32 bit identifier - IPV4
Minimum number - 2 one for comcast one for you
NAT reduces to 1 address

#### Next GenIP (IPV6)

Tunneling and Encapsulation

- IPV6/V4 Router to (IPV4 Network) to IPV4/IPV6 Router
- Creates a new IPV4 Packet that Encapsulates the entire IPV6 Packet
- Tunneling --> to bypass firewall

#### MAC Address (LAN or Physical or Ethernet)

- 32 bit IP Address (Network Later Forwarding)
- Used 'Locally' to get frame on one interface to another (48 bit burned into NIC ROM, also sometimes software settableÃŸ)
- First 3 bytes are the Manufactor ID
- ARP Table = MAC Address
  -- IP Address / MAC Addr / TTL
  -- ICMP -

HOW Does the HOST gets an IP address within the network?

- Sys Admin - Hardcoded (Manually gave IP Address)
- DHCP - dynamically get address from a server "Plug and Play"s (can colocates in route, serving all subnets - within router)
  -- Rewnew its lease of addresses
  -- support for mobile users to join/leave
  1. Host Broadcasts 0
- Ethernet addressed are configured into network by manufacture
  -- IP must be unique on a given internetowrk but also must reflect the structure of the network
  -- Drawbacks of manual configuration -error prone
  -- Automated configuration proceess is required

How does a netowrk get IP Address for itself

-

#### Global Addresses

- Globally Unique
- Hierarchical
- 4 billion ip half are A type, 1/4 b type, 1/8 type
- 2 Addresses are Reserved
  -- 0.0.0.0 (Broadcast)
  -- 255.255.255.255 (Router)

| Format | aa  | Network | Host | # IP Networks | # of Hosts |
| ------ | --- | ------- | ---- | ------------- | ---------- |
| A Type | 1   | 7       | 24   | 128           | 16_777_216 |
| B Type | 2   | 14      | 16   | 16_384        | 65_536     |
| C Type | 3   | 21      | 8    | 2_097_152     | 256        |

Subnets

UDP Packet to port 53

Subnet

- Host Number subtract 2
- You can expand networks via subnets by attributing more towrds netowkrs
  11111111111
- TRADE HOST BIT SPACE FOR SUBNET SPACE
  | Network Number | HostID |
  | Network Number| Subnet ID | HostID |

Give out ranges of address for CIDR

- Classess InterDomain Routing
- Subnet portion of addreess of arbirtary length
- a.b.c.d/x - x is the buts in subnet portion addresss
- /26

Consider an AS with 16 class c cnetworks - 16 contiguous addresses at random
top 20 bits of all the addresses in this range are the same
4x256 = 1024

- share commmon prefix.

20 bit
192.4.16 through 192.4.31 = 192.4.16/20

192.4.16/24 = Class C Number

#### NAT (Network address translation)

- All devices in loval netowkr share 1 IPv4 addess
- Thw network does not ROUTE
- DATAGRAM LEAVING NETWORK HAS SAME SOURCE ADDRESS
- 1 ip address needed from ISP for all devices
- change ISP without changing address of local network
- device outside net not direcly addressable
- NAT was the solution - WIFI - Corporations - No one can connect to them directly
- Implemtation
  -- Datagram coming out the Router --> replace SOURCE IP. PORT #
  -- Each host has a different port in the translation
- NAT CONS
  -- Routers should process up to layer 3
  -- Address "Shortage" should be solved by ipv6
  -- violates the end to end argument
  -- NAT Traversial - Connect to server behind NAT?
  -- Security: Break into router then the network
  -- you are not connected to the nat directly
  --- New port only gets open when something gets something out

  Google ---< OUTSIDEIP 138.76.29.7 --Router-- 10.0.0.4 INSIDEIP> ----> 10.0.0.1 & 10.0.0.2 & 10.0.0.3 & 10.0.0.4

## DNS Iterated Query

- Contacted server replies with name of server
- Requesting Host at Engineering.nyu.edu <--> dns.nyu.edu
  dns.nyu.edu <--> root DNS Server
  dns.nyu.edu <--> RLD Dns Server
  dns.nyu.edu <--> Authoriative DNS Server gaia.cs.umass.edu
  dns.nyu.edu --> Engineering.nyu.edu

## DNS Recursive Query

- Burden on contacted server
- Heavy load at upper levels
- Requesting Host at Engineering.nyu.edu --> dns.nyu.edu --> root DNS Server --> RLD Dns Server --> Authoriative DNS Server gaia.cs.umass.edu

### Cached - TTL - Time To Live

- Improves Response Time
- Cache Entries Timeout
- TLD Server Typically cached local named servers

### DNS Record

- Read more than written
- RR (Name, value, type, ttl)

1. Type A

- name is hostname
- va;ue is IP Address

2. type=NS

- name is domain
- value is hostname of authoritive name server of domain

- Digital Ocean (Hosting) --> Point to Cloudflare services

3. type=CNAME

- name is alias name for some cononical the real name
- www.ibm.com is really servereast.bakcup2.ibm.com
  -balue is conical name

4. type=MX

- value SMTP mail server asossoicated with name

### DNS Security

- DDos Attacks
  -- bombarded root servers with traffic - Recursively
  -- traffic filtering
- Bombarded TLD Servers
  -- Potentially more dangerous
- Spoofing Attacks
  -- Intercept DNS Queries returning bous replies
  -- DNS Cache poisoining
  -- RFC 4033: DNSSEC

## RDT

- Transport Layer Services
  -- Multiplexesing
  -- Demultiplexing
  -- Reliable data transfer
  -- Flow control
  -- congestion control

Layer Protocols

- TCP (Transmission Control Protocol)
  -- Reliable, IN-ORDER Delivery
  -- Flow Control (Handing Down Requests)
  -- Connection Setup
  -- TCP Congestion Control (Lights)
- UDP (User Datagram Protocol)
  -- unreliable, OUT-OF-ORDER delivery
  -- Best-effort IP
  -- delay barunateers
  -- bandwidth guarantees

## Application Process running on different Hosts

Multiplexing at the Sender -
Demultiplexing at Receiver -

- to send packet to correct host socket
- each datagram has sourcep Ip & Destination IP
- each databram carries one transport layer segment
- each segment has source, destination number

Source vs Destination Ports
UDP - Destination Port Number Only
TCP - SOURCE IP, DESTINATION IP, SOURCE PORT, DESTINATION PORT (Unique connection)

## UDP

- DNS
- SNMP
- HTTP/3
  If Reliable transfer needed over UDP (HTTP3)
- Add needed reliablity at application layer
- Add congestion Controal at application layer
- Checksum (2bit flips cannot be detected)

1. Add 2 16bit integers
2. MSB gets added to result
3. 1s Complement

TCP Sliding Window Protocol

- Go-Back-n
  -- Requires frames to be recivened in the same orders
  -- K-bit Sequence Number in PacketHeader
  -- (Reciever) - Send ACK for correcrtly Recieved packet so far with Highest in-order seq #
  -- (Reciever) - Can discard (do not buffer) an implementation decision
  -- (Reciever) re-ACK pky with highest in order sequence #
  -- (Reciever) ACK only - always send ACK for correctly recieved packeyt so far with in order
  -- (Reciever) On Receipt of out of order packet
  -- (Reciever) re-ACK pky with highest in order seq # (Store up to 2 packet)

- Selective Repeat
  -- Does not require the rames to be recivned in the same order
  -- Requires the reviver to be able to hold the frames
  -- reciever individually acknowleges all correct packets
  -- sender times out/retransmits

  TCP Segments

  - Points to Point
  - Reliable, Inporder byte stream
  - Full Duplex data
    -- Bydirectional data flow in same connection
    -- MSS
  - Cumulative ACKs (go back n)
  - Pipelineing
  - Connection oriented
  - Flow controlled

- TCP Buffers Out Of Order Packets?
- Sequence size -> Ack Number is the byte length
- Timeout Value (Dynamic Value)
  -- Longer than RTT but RTT
  -- Too short . Premature
  -- too long . Slow Reaction Segment Loss
  -- Exponetial Weighted Moving Average (1 - a) \* EstimatedRTT + a \* SampleRTT (a is typically 0.125)
  -- Safety Margin - Large Variation = Larger Safety Margin
  -- TimeoutInterval = EstimatedRTT + 4 \* DevRTT (Change in RoundTripTime)
  -- DevRTT = (1 - b) \* DevRTT = b \* |SampleRTT-EsimatedRTT| b is typically 0.25

### TCP FLOW CONTROL

- Application --> TCP Socket Receiver Buffer --> TP Code --> IP Code
- Flow Control Header - Number of Bytes Receiver is willing to accept
- rwnd field
  = RcvBuffer - Size Set via Socket Options - Auto Adjust
  = In flight Data - data to received rwnd
  = Gauantees received buffer whill not overflow.
