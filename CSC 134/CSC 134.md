# Database Management Systems

Normalization (1 - 5 Levels)

Read and Write Databases

2 sets of databases which will compute and update later on or else the compute lenthency will be high

## Types

Varchar2(10) - Variable Length
Char(10) - Fixed Length
Truncate - Fast Unrecoverable Deletion of Data (Some Data is still in memory)
Delete - Slow Recoverable Deletion of Data

## Useful Commands

CREATE TABLE patient (
patient_id NUMBER,
fname VARCHAR(10),
lname VARCHAR(10)
);

### Primary Key

1. Creating a composite primary key without a constraint name.

- ALTER TABLE patient ADD PRIMARY KEY (fname, lname);

2. Can create a primary key using alter table statement.

- ALTER TABLE patient ADD PRIMARY KEY (patient_id);

3. Add a constraint name

- ALTER TABLE patient ADD CONSTRAINT patient_patient_id_pk PRIMARY KEY (patient_id);

4. Instead of adding, modify can be used as well.

- ALTER TABLE patient MODIFY patient_id PRIMARY KEY;
- ALTER TABLE patient MODIFY patient_id CHAR PRIMARY KEY;
- ALTER TABLE patient MODIFY patient_id CONSTRAINT patient_patient_id_pk PRIMARY KEY;

## Examples

### Name - Age - Address - Disease1 - Disease2 - Disease 3

1. Patient

- PatientID - Name - Age - AddressID

2. Disease

- DiseaseID - Disease

3.  Address

- AddressID - Address

4. Patient Disease

- PatientID - DiseaseID
  Student - Religion - Eth1 - Eth2

### StudentID - FirstName - LastName - ReligionID

1. Religion

- ReligionID - ReligionName

2. Ethnicity

- EthnicityID - EthnicityName

3. Student Ethnicity

- StudentID - EthnicityID

Marrage

PersonID - First Name - Last Name - MarriedID
vs
PersonID - First Name - Last Name - PartnerID(PersonID (FK))

### Column Level Primary Key

select constraint_name, constraint_type, table_name, status from user_constraints;
where table_name = 'PATIENT'; // Case Sensitive when querying

create table patient (
patient_id NUMBER constraint paitent_id_pk primary key,
fname VARCHAR(10),
lname VARCHAR(10)
);

### Table Level Primary Key

create table patient (
patient_id NUMBER,
fname VARCHAR(10),
lname VARCHAR(10),
constraint patient_lnamefname_pk primary key (fname, lname)
);

#### Add Primary Keys to Existing Tables

create table patient (
patient_id NUMBER,
fname VARCHAR(10),
lname VARCHAR(10),
);

1. Column Level
   alter table patient modify patient_id primary key
   constraint patient_pk unique

   alter table patient modify fname not null

   alter table patient disable constraint patient_pk
   alter table patient disable primary key

   alter talbe
   alter table patient enable constraint patient_pk

2. Table Level (Composite Key) - Cannot create a not null constraint at the table level
   alter table patient add primary key (fname, lname)

### Why would we wna tto disable primary key

1. Creating a copy of table to then enable primary key because with every entry there will check for duplication

### Parameters

#### Table Level

1. create table patient (
   patient_id NUMBER,
   fname VARCHAR(10) unique,
   lname VARCHAR(10) not null,
   salary NUMBER check (salary > 100)
   );

select constraint_name, constraint_type, table_name, status, search_condition from user_constraints;

| constraint type | meaning     |
| --------------- | ----------- |
| c               | check       |
| p               | primary key |
| u               | unique      |
| r               | references  |

#### Column Level

1. create table patient (
   patient_id NUMBER,
   fname VARCHAR(10),
   lname VARCHAR(10),
   salary NUMBER,
   check (salary > 100)
   );

##### Checkpoint 3

drop table patient;
drop table person;

create table person (
person_id number primary key,
SSN char(9),
lname varchar(10),
salary number,
dob date,
constraint unique_key unique(SSN)
);

alter table person modify dob not null;

insert into person values (1,'123456789', 'Tww', 100, '04 Feb 2025');

alter table person modify salary check (salary > 100); // Column Level

#### Foriegn Key

drop table patient_disease;
drop table patient;
drop table disease;

create table patient (
patient_id number primary key,
height number,
fname varchar(10),
lname varchar(10)
);

create table disease (
disease_id number primary key,
disease_name varchar(10)
);

create table patient_disease (
patient_id number references constraint patient_patient_id_fk patient(patient_id),
disease_id number,
primary key(patient_id, disease_id),
constraint patient_disease_disease_id_fk foreign key (disease_id) references disease(disease_id)
);

1. Column Level
   alter table patient_disease modify patient_id references constraint patient_patient_id_fk patient(patient_id),

2. Table Level
   alter table patient_disease add constraint patient_disease_disease_id_fk foreign key (disease_id) references disease(disease_id)

### Deletion

on concasade delete

#### Esample

// Column Level
create table Person (
person_id number constraint person_id_pk primary key,
fname varchar(10),
lname varchar(10),
personality_id number constraint personality_id_fk references personality(personality_id)

);

// Table Level
create table Person (
person_id number,
fname varchar(10),
lname varchar(10),
personality_id number,
primary key(person_id),
foreign key(personality_id) references personality(personality_id)
);

// Column Level
create table Personality (
personality_id number constraint personality_id_pk primary key,
personality_name varchar(20)
)

// Table Level
create table Personality (
personality_id number,
personality_name varchar(20),
primary key(personality_id)
)

insert into Personality values (1, 'Aggressive');
insert into Person values (1, 'John', 'Doe', 1);

ALTER TABLE person MODIFY person_id CONSTRAINT person_id_pk PRIMARY KEY;
ALTER TABLE person ADD CONSTRAINT person_id_pk PRIMARY KEY(person_id);

ALTER TABLE person MODIFY personality_id CONSTRAINT personality_id_fk REFERENCES personality; // Column Level
ALTER TABLE person ADD CONSTRAINT personality_id_fk FORIEGN KEY(personality_id) REFERENCES personality;

desc user_indexes;

insert into date_test values (to_date('july 01 1990 12:12:00 AM', 'month dd yyyy hh:mi:ss AM'));
alter session set nls_date_format = 'MON-DD-YY HH24:MI:SS'

### Sequences

Generated auto Primary Keys

select sysdate from dual;

find the next value from my sequence -- Dual table is the dummy table

currval vs nextval

- nextval increments every call  
- currval doesnt
